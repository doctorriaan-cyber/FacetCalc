<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Block Mixture Calculator</title>
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the app */
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Set the theme to dark mode by default */
        html {
            color-scheme: dark;
        }

        /* Basic styling for round buttons */
        .round-btn {
            @apply w-12 h-12 rounded-full flex items-center justify-center text-white font-bold transition-transform transform active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed;
        }

        /* Animation for the settings sidebar */
        .settings-sidebar {
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-slate-900 text-gray-100 min-h-screen flex flex-col items-center justify-center p-4">

    <!-- Settings Sidebar -->
    <div id="settings-sidebar" class="settings-sidebar fixed top-0 left-0 h-full w-64 bg-slate-900 z-50 transform -translate-x-full shadow-2xl p-6">
        <!-- Close button -->
        <button id="close-settings-btn" class="absolute top-4 right-4 p-2 text-white hover:text-gray-400">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>
        
        <!-- Settings content -->
        <h2 class="text-2xl font-bold mb-6 mt-4">Settings</h2>

        <!-- Lignocaine Dose Setting -->
        <div class="mb-4">
            <label for="max-lignocaine-dose" class="block text-sm font-medium text-gray-400 mb-2">Max Lignocaine Dose</label>
            <div class="flex items-center gap-2">
                <input type="number" id="max-lignocaine-dose" value="4.5" class="bg-slate-700 text-white font-mono p-2 rounded-lg w-24 focus:outline-none focus:ring-2 focus:ring-sky-500" step="0.1" min="0">
                <span class="text-gray-300 font-bold">mg/kg</span>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="main-container" class="bg-slate-800 p-6 rounded-2xl shadow-lg w-full max-w-sm relative">
        
        <!-- Settings button (Burger Menu) -->
        <button id="open-settings-btn" class="absolute top-4 left-4 p-2 text-white hover:text-gray-400 z-10">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </button>

        <!-- App Title -->
        <h1 class="text-3xl font-bold text-center mb-8 mt-4">Block Mixture Calculator</h1>

        <!-- Weight Selector Section -->
        <div class="mb-8">
            <h2 class="text-xl text-center mb-4">Weight in kg</h2>
            
            <div class="flex items-center justify-center gap-2">
                <!-- Buttons for decreasing weight -->
                <button id="minus-10-btn" class="round-btn bg-sky-600 hover:bg-sky-700">-10</button>
                <button id="minus-1-btn" class="round-btn bg-sky-600 hover:bg-sky-700">-1</button>

                <!-- Weight Display Box -->
                <div id="weight-display" class="flex-1 text-center bg-slate-700 text-white font-mono text-2xl py-4 px-2 rounded-xl border border-gray-600 mx-2 select-none">
                    70 kg
                </div>

                <!-- Buttons for increasing weight -->
                <button id="plus-1-btn" class="round-btn bg-sky-600 hover:bg-sky-700">+1</button>
                <button id="plus-10-btn" class="round-btn bg-sky-600 hover:bg-sky-700">+10</button>
            </div>
        </div>

    </div>

    <!-- JavaScript logic -->
    <script>
        // Use a DOMContentLoaded listener to ensure the script runs after the document is fully loaded
        document.addEventListener('DOMContentLoaded', () => {

            // Get references to all necessary DOM elements
            const weightDisplay = document.getElementById('weight-display');
            const minus10Btn = document.getElementById('minus-10-btn');
            const minus1Btn = document.getElementById('minus-1-btn');
            const plus1Btn = document.getElementById('plus-1-btn');
            const plus10Btn = document.getElementById('plus-10-btn');
            
            // Sidebar elements
            const settingsSidebar = document.getElementById('settings-sidebar');
            const openSettingsBtn = document.getElementById('open-settings-btn');
            const closeSettingsBtn = document.getElementById('close-settings-btn');
            const mainContainer = document.getElementById('main-container');

            // Initialize the default weight and the min/max values
            let currentWeight = 70;
            const minWeight = 30;
            const maxWeight = 200;

            // Function to update the weight display and button states
            const updateWeightDisplay = () => {
                // Update the text content of the display
                weightDisplay.textContent = `${currentWeight} kg`;

                // Disable buttons if the weight is at the min or max limit
                minus1Btn.disabled = currentWeight <= minWeight;
                minus10Btn.disabled = currentWeight <= minWeight + 9; 
                plus1Btn.disabled = currentWeight >= maxWeight;
                plus10Btn.disabled = currentWeight >= maxWeight - 9;
            };

            // Function to handle weight changes, clamping the value within the valid range
            const changeWeight = (delta) => {
                const newWeight = currentWeight + delta;
                if (newWeight >= minWeight && newWeight <= maxWeight) {
                    currentWeight = newWeight;
                } else if (newWeight < minWeight) {
                    currentWeight = minWeight;
                } else if (newWeight > maxWeight) {
                    currentWeight = maxWeight;
                }
                updateWeightDisplay();
            };

            // Event listener for the '-1' button
            minus1Btn.addEventListener('click', () => changeWeight(-1));

            // Event listener for the '-10' button
            minus10Btn.addEventListener('click', () => changeWeight(-10));

            // Event listener for the '+1' button
            plus1Btn.addEventListener('click', () => changeWeight(1));

            // Event listener for the '+10' button
            plus10Btn.addEventListener('click', () => changeWeight(10));

            // Event listeners for the settings sidebar
            openSettingsBtn.addEventListener('click', () => {
                settingsSidebar.classList.remove('-translate-x-full');
            });

            closeSettingsBtn.addEventListener('click', () => {
                settingsSidebar.classList.add('-translate-x-full');
            });

            // Initial call to set the display to the default weight and set initial button states
            updateWeightDisplay();
        });
    </script>
</body>
</html>
