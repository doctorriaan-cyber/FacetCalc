<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Block Mixture Calculator</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom style to ensure body covers full screen and no horizontal scrolling -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        .gender-button.selected {
            background-color: #3b82f6; /* A slightly darker blue for selected state */
            color: white;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            border-color: #2563eb;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 flex items-center justify-center min-h-screen p-4">

    <!-- Main Container -->
    <div class="w-full max-w-sm mx-auto bg-gray-800 p-6 sm:p-8 rounded-2xl shadow-lg border border-gray-700">
        
        <!-- Heading -->
        <h1 class="text-2xl sm:text-3xl font-extrabold text-center mb-8 text-white">Block Mixture Calculator</h1>

        <!-- Weight Selector Section -->
        <div class="mb-8">
            <h2 class="text-lg font-semibold text-center mb-4">Actual weight</h2>
            <div class="flex items-center justify-center space-x-2 sm:space-x-4">
                
                <!-- Subtract 10kg Button -->
                <button id="subtract10" class="flex items-center justify-center w-14 h-10 sm:w-18 sm:h-14 rounded-full bg-blue-600 text-white shadow-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 active:bg-blue-800" aria-label="Subtract 10 kilograms">
                    <span class="text-sm sm:text-md font-bold p-1">-10</span>
                </button>
                
                <!-- Subtract 1kg Button -->
                <button id="subtract1" class="flex items-center justify-center w-14 h-10 sm:w-18 sm:h-14 rounded-full bg-blue-500 text-white shadow-md hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75 active:bg-blue-700" aria-label="Subtract 1 kilogram">
                    <span class="text-sm sm:text-md font-bold p-1">-1</span>
                </button>
                
                <!-- Weight Display Box -->
                <div id="weightDisplay" class="flex items-center justify-center w-28 h-16 sm:w-40 sm:h-20 bg-gray-700 rounded-xl shadow-inner border border-gray-600">
                    <span class="text-xl sm:text-3xl font-extrabold text-white select-none">70kg</span>
                </div>
                
                <!-- Add 1kg Button -->
                <button id="add1" class="flex items-center justify-center w-14 h-10 sm:w-18 sm:h-14 rounded-full bg-blue-500 text-white shadow-md hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75 active:bg-blue-700" aria-label="Add 1 kilogram">
                    <span class="text-sm sm:text-md font-bold p-1">+1</span>
                </button>
                
                <!-- Add 10kg Button -->
                <button id="add10" class="flex items-center justify-center w-14 h-10 sm:w-18 sm:h-14 rounded-full bg-blue-600 text-white shadow-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 active:bg-blue-800" aria-label="Add 10 kilograms">
                    <span class="text-sm sm:text-md font-bold p-1">+10</span>
                </button>
            </div>
        </div>

        <!-- Height Selector Section with BMI squeezed in -->
        <div class="mb-8">
            <!-- Centered container for Height and BMI -->
            <div class="flex items-end justify-center mb-4 space-x-2">
                <h2 class="text-lg font-semibold">Height</h2>
                <!-- BMI display is now justified to the right -->
                <div class="px-1 rounded border border-gray-500 bg-gray-700">
                    <div class="text-xs text-gray-400">
                        <span id="bmiLabel">BMI:</span> <span id="bmiDisplay" class="font-medium text-white">--</span>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-center space-x-2 sm:space-x-4">
                
                <!-- Subtract 10cm Button -->
                <button id="subtract10cm" class="flex items-center justify-center w-14 h-10 sm:w-18 sm:h-14 rounded-full bg-blue-600 text-white shadow-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 active:bg-blue-800" aria-label="Subtract 10 centimeters">
                    <span class="text-sm sm:text-md font-bold p-1">-10</span>
                </button>
                
                <!-- Subtract 1cm Button -->
                <button id="subtract1cm" class="flex items-center justify-center w-14 h-10 sm:w-18 sm:h-14 rounded-full bg-blue-500 text-white shadow-md hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75 active:bg-blue-700" aria-label="Subtract 1 centimeter">
                    <span class="text-sm sm:text-md font-bold p-1">-1</span>
                </button>
                
                <!-- Height Display Box -->
                <div id="heightDisplay" class="flex items-center justify-center w-28 h-16 sm:w-40 sm:h-20 bg-gray-700 rounded-xl shadow-inner border border-gray-600">
                    <span class="text-xl sm:text-3xl font-extrabold text-white select-none">170cm</span>
                </div>
                
                <!-- Add 1cm Button -->
                <button id="add1cm" class="flex items-center justify-center w-14 h-10 sm:w-18 sm:h-14 rounded-full bg-blue-500 text-white shadow-md hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75 active:bg-blue-700" aria-label="Add 1 centimeter">
                    <span class="text-sm sm:text-md font-bold p-1">+1</span>
                </button>
                
                <!-- Add 10cm Button -->
                <button id="add10cm" class="flex items-center justify-center w-14 h-10 sm:w-18 sm:h-14 rounded-full bg-blue-600 text-white shadow-md hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 active:bg-blue-800" aria-label="Add 10 centimeters">
                    <span class="text-sm sm:text-md font-bold p-1">+10</span>
                </button>
            </div>
        </div>

        <!-- Gender Selector Section -->
        <div class="mb-8">
            <h2 class="text-lg font-semibold text-center mb-4">Gender</h2>
            <div class="flex items-center justify-center space-x-4">
                <button id="maleBtn" class="gender-button px-6 py-2 rounded-full bg-gray-700 text-gray-400 font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 selected">Male</button>
                <button id="femaleBtn" class="gender-button px-6 py-2 rounded-full bg-gray-700 text-gray-400 font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">Female</button>
            </div>
        </div>

        <!-- Ideal Weight Section -->
        <div class="bg-gray-700 p-4 rounded-xl shadow-inner border border-gray-600 flex flex-col items-center">
            <h2 class="text-xl font-bold mb-4">Ideal weight</h2>
            <div class="flex items-center w-full justify-between">
                <!-- Button instead of a checkbox and label -->
                <button id="useIdealWeightBtn" class="px-3 py-1 rounded-full text-sm font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75 bg-gray-600 text-gray-200">
                    Use Ideal Weight for calculations
                </button>
                <div id="idealWeightDisplay" class="flex items-center justify-center bg-gray-600 p-2 rounded-lg min-w-[100px]">
                    <span class="text-lg sm:text-xl font-extrabold text-white select-none">-- kg</span>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript for functionality -->
    <script>
        // Use window.onload to ensure the DOM is fully loaded before the script runs
        window.onload = function() {
            // Get references to all the elements
            const weightDisplay = document.getElementById('weightDisplay').querySelector('span');
            const subtract10Btn = document.getElementById('subtract10');
            const subtract1Btn = document.getElementById('subtract1');
            const add1Btn = document.getElementById('add1');
            const add10Btn = document.getElementById('add10');
            
            const heightDisplay = document.getElementById('heightDisplay').querySelector('span');
            const subtract10cmBtn = document.getElementById('subtract10cm');
            const subtract1cmBtn = document.getElementById('subtract1cm');
            const add1cmBtn = document.getElementById('add1cm');
            const add10cmBtn = document.getElementById('add10cm');

            const maleBtn = document.getElementById('maleBtn');
            const femaleBtn = document.getElementById('femaleBtn');
            const idealWeightDisplay = document.getElementById('idealWeightDisplay').querySelector('span');
            const useIdealWeightBtn = document.getElementById('useIdealWeightBtn');

            // Get new BMI display element
            const bmiDisplay = document.getElementById('bmiDisplay');

            // Set the initial values and define the min/max limits
            let currentWeight = 70;
            const minWeight = 30;
            const maxWeight = 200;

            let currentHeight = 170;
            const minHeight = 80;
            const maxHeight = 250;
            let currentGender = 'male';

            // State variable for the new button
            let useIdealWeightForCalculation = false;

            // Function to update the weight display and BMI
            function updateWeightDisplay() {
                weightDisplay.textContent = `${currentWeight}kg`;
                calculateBMI();
            }

            // Function to handle weight changes with boundaries
            function changeWeight(change) {
                currentWeight += change;
                // Clamp the weight to the specified range
                if (currentWeight < minWeight) {
                    currentWeight = minWeight;
                }
                if (currentWeight > maxWeight) {
                    currentWeight = maxWeight;
                }
                updateWeightDisplay();
            }

            // Function to update the height display and re-calculate
            function updateHeightDisplay() {
                heightDisplay.textContent = `${currentHeight}cm`;
                calculateIdealWeight();
                calculateBMI();
            }

            // Function to handle height changes with boundaries
            function changeHeight(change) {
                currentHeight += change;
                // Clamp the height to the specified range
                if (currentHeight < minHeight) {
                    currentHeight = minHeight;
                }
                if (currentHeight > maxHeight) {
                    currentHeight = maxHeight;
                }
                updateHeightDisplay();
            }
            
            // Function to calculate and display ideal weight using Devine formula
            function calculateIdealWeight() {
                let idealWeight;
                const baseHeightCm = 152.4; // 60 inches in cm

                if (currentHeight > baseHeightCm) {
                    const heightDiffCm = currentHeight - baseHeightCm;
                    const increment = 0.91 * heightDiffCm;
                    if (currentGender === 'male') {
                        idealWeight = 50 + increment;
                    } else { // female
                        idealWeight = 45.5 + increment;
                    }
                } else {
                    idealWeight = (currentGender === 'male') ? 50 : 45.5;
                }

                idealWeightDisplay.textContent = `${idealWeight.toFixed(1)}kg`;
            }

            // Function to calculate and display BMI
            function calculateBMI() {
                // BMI = weight (kg) / [height (m)]^2
                const heightInMeters = currentHeight / 100;
                const bmi = currentWeight / (heightInMeters * heightInMeters);
                bmiDisplay.textContent = `${bmi.toFixed(1)}`;
            }

            // Function to handle gender selection
            function handleGenderSelection(selectedBtn, otherBtn, genderValue) {
                selectedBtn.classList.add('selected');
                otherBtn.classList.remove('selected');
                selectedBtn.classList.remove('bg-gray-700', 'text-gray-400');
                selectedBtn.classList.add('bg-blue-500', 'text-white');
                otherBtn.classList.add('bg-gray-700', 'text-gray-400');
                otherBtn.classList.remove('bg-blue-500', 'text-white');
                currentGender = genderValue;
                calculateIdealWeight();
            }

            // Event listener for the -10kg button
            subtract10Btn.addEventListener('click', () => {
                changeWeight(-10);
            });

            // Event listener for the -1kg button
            subtract1Btn.addEventListener('click', () => {
                changeWeight(-1);
            });

            // Event listener for the +1kg button
            add1Btn.addEventListener('click', () => {
                changeWeight(1);
            });

            // Event listener for the +10kg button
            add10Btn.addEventListener('click', () => {
                changeWeight(10);
            });

            // Event listener for the -10cm button
            subtract10cmBtn.addEventListener('click', () => {
                changeHeight(-10);
            });

            // Event listener for the -1cm button
            subtract1cmBtn.addEventListener('click', () => {
                changeHeight(-1);
            });

            // Event listener for the +1cm button
            add1cmBtn.addEventListener('click', () => {
                changeHeight(1);
            });

            // Event listener for the +10cm button
            add10cmBtn.addEventListener('click', () => {
                changeHeight(10);
            });

            // Event listeners for gender buttons
            maleBtn.addEventListener('click', () => {
                handleGenderSelection(maleBtn, femaleBtn, 'male');
            });

            femaleBtn.addEventListener('click', () => {
                handleGenderSelection(femaleBtn, maleBtn, 'female');
            });
            
            // Event listener for the "Use Ideal Weight" button
            useIdealWeightBtn.addEventListener('click', () => {
                useIdealWeightForCalculation = !useIdealWeightForCalculation; // Toggle the state
                if (useIdealWeightForCalculation) {
                    useIdealWeightBtn.classList.remove('bg-gray-600', 'text-gray-200');
                    useIdealWeightBtn.classList.add('bg-blue-500', 'text-white');
                } else {
                    useIdealWeightBtn.classList.remove('bg-blue-500', 'text-white');
                    useIdealWeightBtn.classList.add('bg-gray-600', 'text-gray-200');
                }
            });

            // Initial calculations on load
            updateWeightDisplay();
            updateHeightDisplay();
        };
    </script>
</body>
</html>
